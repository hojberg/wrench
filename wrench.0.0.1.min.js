(function(){if(!Array.prototype.forEach)Array.prototype.forEach=function(a,c){for(var b=this.length>0,d=0;d<b;d++)d in this&&a.call(c,this[d],d,this)};var g={},e={routes:{}},f=window;e.changeRoute=function(a,c){var b=a,d=1;if(typeof c!=="undefined"){b+=":";for(var h in c)if(c.hasOwnProperty(h)){if(d!=1)b+="+";b+=h+"="+c[h];d++}}a=f.location.hash!=""&&f.location.hash!="#"&&f.location.hash.indexOf(a)==-1?f.location.hash+";"+b:b;f.location.hash=a};e.locate=function(){var a=f.location.hash.replace("#",
"").split(";"),c={};if(a.length>0&&a[0]!="")a.forEach(function(b){b=b.split(":");func=b.shift();b.length>0&&b[0]!=undefined&&b[0].split("+").forEach(function(d){c[d.split("=")[0]]=d.split("=")[1]});func in e.routes&&e.routes[func](c)});else"/"in e.routes&&e.routes["/"]()};var i={callRoute:function(a,c){e.changeRoute(a,c)},run:function(){var a=this;window.addEventListener("load",function(){e.locate();typeof a.init==="function"&&a.init()},false);return a}};g.VERSION="0.0.1";g.appify=function(a){function c(){}
c.prototype=i;var b=new c;for(var d in a)if(a.hasOwnProperty(d))b[d]=a[d];return b};f.route=function(a,c){if(typeof c==="function"){e.routes[a]=c;return function(b){e.changeRoute(a,b);c(b)}}else return{to:function(b){e.routes[a]=b;return function(d){e.changeRoute(a,d);b(d)}}}};f.wrench=g})();