(function(){var i={},d={routes:{}},g=window;i.VERSION="0.0.1";d.changeRoute=function(a,b){var c=a,e=1;if(typeof b!=="undefined"){c+=":";for(var f in b)if(b.hasOwnProperty(f)){if(e!==1)c+="+";c+=f+"="+b[f];e++}}a=g.location.hash!==""&&g.location.hash!=="#"&&g.location.hash.indexOf(a)===-1?g.location.hash+";"+c:c;g.location.hash=a};d.locate=function(){var a=g.location.hash.replace("#","").split(";"),b=a.length,c={};if(b>0&&a[0]!=="")for(var e=0;e<b;e++){var f=a[e].split(":");func=f.shift();if(f.length>
0&&typeof f[0]!=="undefined"){f=f[0].split("+");for(var j=f.length,h=0;h<j;h++)c[f[h].split("=")[0]]=f[h].split("=")[1]}func in d.routes&&d.routes[func](c)}else"/"in d.routes&&d.routes["/"]()};var k={callRoute:function(a,b){d.changeRoute(a,b)},run:function(a){var b=this,c=function(){d.locate();typeof b.init==="function"&&b.init()};a&&c();g.addEventListener("load",c,false);g.onhashchange=d.locate;return b}};i.appify=function(a){function b(){}b.prototype=k;var c=new b;for(var e in a)if(a.hasOwnProperty(e))c[e]=
a[e];return c};g.route=function(a,b){if(typeof b==="function"){d.routes[a]=b;return function(c){d.changeRoute(a,c);b(c)}}else return{to:function(c){d.routes[a]=c;return function(e){d.changeRoute(a,e);c(e)}}}};g.wrench=i})();